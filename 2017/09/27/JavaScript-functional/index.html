<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>JavaScript 函数式编程 - Gnipbao&#39;s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="函数式编程概念 编程范式 纯函数 (Purity)   高阶函数">
<meta name="keywords" content="JavaScript 函数式编程">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaScript 函数式编程">
<meta property="og:url" content="https://gnipbao.github.io/2017/09/27/JavaScript-functional/index.html">
<meta property="og:site_name" content="Gnipbao&#39;s blog">
<meta property="og:description" content="函数式编程概念 编程范式 纯函数 (Purity)   高阶函数">
<meta property="og:locale" content="zh-cn">
<meta property="og:image" content="https://user-images.githubusercontent.com/16514704/30242371-dceba154-95c7-11e7-84c6-ec5936605a84.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/16514704/30239965-a87190c4-9599-11e7-8ffe-d7b4a36ec2f6.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/16514704/30263004-e181f4c2-9705-11e7-8b56-03b8af5bab2a.png">
<meta property="og:updated_time" content="2017-12-16T15:46:35.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JavaScript 函数式编程">
<meta name="twitter:description" content="函数式编程概念 编程范式 纯函数 (Purity)   高阶函数">
<meta name="twitter:image" content="https://user-images.githubusercontent.com/16514704/30242371-dceba154-95c7-11e7-84c6-ec5936605a84.png">
  
    <link rel="alternative" href="/atom.xml" title="Gnipbao&#39;s blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/images/favicon.ico">
  
  <link href="/webfonts/ptserif/main.css" rel='stylesheet' type='text/css'>
  <link href="/webfonts/source-code-pro/main.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <header id="header">
  <a href="https://github.com/gnipbao/iblog" class="github-corner" aria-label="View source on Github"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
  <div id="header-outer" class="outer">
    <div id="header-inner" class="inner">
      <a id="main-nav-toggle" class="nav-icon" href="javascript:;"></a>
      <a id="logo" class="logo logo-text" href="/">Gnipbao</a>
      <nav id="main-nav">
        
          <a class="main-nav-link" href="/">主页</a>
        
          <a class="main-nav-link" href="/archives">归档</a>
        
          <a class="main-nav-link" href="/categories">分类</a>
        
          <a class="main-nav-link" href="/tags">标签</a>
        
          <a class="main-nav-link" href="/h5-test/menu.html">作品</a>
        
          <a class="main-nav-link" href="/me">关于</a>
        
      </nav>
      <nav id="sub-nav">
        <div id="search-form-wrap">
          <!--<p>-->
            <!--<a target="_blank" href="http://shang.qq.com/wpa/qunwpa?idkey=6071b891d167a94217254d0d36cec8a338df210ca5831dd09950740807f5da97"><img border="0" src="http://pub.idqqimg.com/wpa/images/group.png" alt="前端联盟" title="前端联盟"></a>-->
          <!--</p>-->
        </div>
      </nav>
    </div>
  </div>
</header>
    <section id="main" class="outer"><article id="post-JavaScript-functional" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      JavaScript 函数式编程
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2017/09/27/JavaScript-functional/" class="article-date">
  <time datetime="2017-09-27T15:08:09.000Z" itemprop="datePublished">2017-09-27</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/写作/">写作</a>
  </div>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><img src="https://user-images.githubusercontent.com/16514704/30242371-dceba154-95c7-11e7-84c6-ec5936605a84.png" alt="fp1"></p>
<ul>
<li>函数式编程概念<ul>
<li>编程范式</li>
<li><em>纯函数</em> (Purity)</li>
</ul>
</li>
<li>高阶函数<a id="more"></a></li>
<li>由函数构建函数<ul>
<li><em>函数组合</em> (Function Composition)</li>
<li><em>柯里化</em>(Currying)</li>
<li><em>部分应用</em> (Partial Application)</li>
</ul>
</li>
<li>递归<ul>
<li>相互递归</li>
<li><em>尾递归</em>(Tail Calls)</li>
<li><em>蹦床原理</em>(Trampolines)</li>
</ul>
</li>
<li>流行的类库</li>
</ul>
<h2 id="什么是函数式编程"><a href="#什么是函数式编程" class="headerlink" title="什么是函数式编程"></a>什么是函数式编程</h2><ul>
<li><a href="https://zh.wikipedia.org/wiki/%E7%BC%96%E7%A8%8B%E8%8C%83%E5%9E%8B" target="_blank" rel="noopener">编程范式</a> </li>
<li>面向数学的抽象(面向<strong>函数</strong>的编程)</li>
<li>函数作为<strong>一等公民</strong>(可以像任何其他数据类型一样对待)<h2 id="Functional-Programming-Hurts"><a href="#Functional-Programming-Hurts" class="headerlink" title="Functional Programming Hurts?"></a>Functional Programming Hurts?</h2><img src="https://user-images.githubusercontent.com/16514704/30239965-a87190c4-9599-11e7-8ffe-d7b4a36ec2f6.png" alt="fp0"><h2 id="纯函数"><a href="#纯函数" class="headerlink" title="纯函数"></a><em>纯函数</em></h2></li>
<li>此函数在相同的输入值时，总是产生相同的输出。函数的输出和当前运行环境的上下文状态无关。</li>
<li>此函数运行过程不影响运行环境，比如不会触发事件、更改环境中的对象、终端输出值等。</li>
<li>相同的输入，永远会得到相同的输出，而且没有任何可观察的副作用</li>
</ul>
<h2 id="函数式编程的好处"><a href="#函数式编程的好处" class="headerlink" title="函数式编程的好处"></a>函数式编程的好处</h2><ul>
<li>引用透明(Referential transparency)<ul>
<li>一个表达式能够被它的值替代而不改变程序的行为成为引用透明。</li>
</ul>
</li>
<li>No Side Effect(基于状态不可变性)</li>
<li>易于测试(上下文无关)</li>
<li>可并行计算(时序无关,即不依赖外部的状态也不修改外部的状态，函数调用的结果不依赖调用的时间和位置)</li>
<li>bug自限性(问题不会扩散)</li>
</ul>
<h2 id="高价函数-HOF"><a href="#高价函数-HOF" class="headerlink" title="高价函数(HOF)"></a>高价函数(HOF)</h2><ul>
<li>定义<ul>
<li>以一个函数作为参数</li>
<li>以一个函数作为返回值</li>
</ul>
</li>
<li>应用<ul>
<li>ajax异步回调</li>
<li>Array的一些方法sort, map,filter,reduce等</li>
<li>惰性加载函数,函数节流,实现AOP等</li>
</ul>
</li>
</ul>
<h3 id="惰性加载函数"><a href="#惰性加载函数" class="headerlink" title="惰性加载函数"></a>惰性加载函数</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> addEvent = <span class="function"><span class="keyword">function</span>(<span class="params">elem, type, handler</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">window</span>.addEventListener) &#123;</span><br><span class="line">        addEvent = <span class="function"><span class="keyword">function</span>(<span class="params">elem, type, handler</span>) </span>&#123;</span><br><span class="line">            elem.addEventListener(type, handler, <span class="literal">false</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">window</span>.attachEvent) &#123;</span><br><span class="line">        addEvent = <span class="function"><span class="keyword">function</span>(<span class="params">elem, type, handler</span>) </span>&#123;</span><br><span class="line">            elem.attachEvent(<span class="string">'on'</span> + type, handler);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    addEvent(elem, type, handler);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="string">``</span><span class="string">`    </span></span><br><span class="line"><span class="string">### once</span></span><br><span class="line"><span class="string">&lt;a class="jsbin-embed" href="//code.h5jun.com/zeco/1/embed?js,console,output"&gt;JS Bin on jsbin.com&lt;/a&gt;&lt;script src="https:////code.h5jun.com/js/embed.min.js?3.40.2"&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">### throttle(截流函数)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;a class="jsbin-embed" href="//code.h5jun.com/xixo/1/embed?js,console,output"&gt;JS Bin on jsbin.com&lt;/a&gt;&lt;script src="https:////code.h5jun.com/js/embed.min.js?3.40.2"&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">### 函数组合(compose)</span></span><br><span class="line"><span class="string">接收多个函数作为参数，从右到左，一个函数的输入为另一个函数的输出。</span></span><br><span class="line"><span class="string">![compose](https://user-images.githubusercontent.com/16514704/30249905-3dc48152-9678-11e7-807e-b30a5419cacf.png)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">### compose</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>javascript</span><br><span class="line"><span class="keyword">const</span> compose = <span class="function">(<span class="params">f, g</span>) =&gt;</span> (a) =&gt; f(g(a))<span class="comment">//结合律</span></span><br><span class="line"><span class="comment">//f 和 g 都是函数，a 是在它们之间通过“管道”传输的值</span></span><br><span class="line"><span class="keyword">const</span> floorAndToString = compose(<span class="function">(<span class="params">val</span>) =&gt;</span> val.toString(), <span class="built_in">Math</span>.floor) <span class="comment">// 使用</span></span><br><span class="line">floorAndToString(<span class="number">12.12</span>)   <span class="comment">//=&gt; '12'</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reducer</span>(<span class="params">state, action</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> action(state);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reverse</span>(<span class="params">str</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> str.split(<span class="string">''</span>).reverse().join(<span class="string">''</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">upperCase</span>(<span class="params">str</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> str.toUpperCase();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> str = [reverse, upperCase].reduce(reducer, <span class="string">"hello world!"</span>);<span class="comment">//=&gt;!DLROW OLLEH</span></span><br></pre></td></tr></table></figure>
<h3 id="柯里化"><a href="#柯里化" class="headerlink" title="柯里化"></a>柯里化</h3><p>将一个多元函数转变为一元函数的过程。 每当函数被调用时，它仅仅接收一个参数并且返回带有一个参数的函数，直到传递完所有的参数<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//柯里化函数逐渐返回消耗参数的函数，直到所有参数耗尽</span></span><br><span class="line"><span class="keyword">const</span> sum = <span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b</span><br><span class="line"><span class="keyword">const</span> curriedSum = <span class="function">(<span class="params">a</span>) =&gt;</span> (b) =&gt; a + b</span><br><span class="line">curriedSum(<span class="number">3</span>)(<span class="number">4</span>)         <span class="comment">// 7</span></span><br><span class="line"><span class="keyword">const</span> add2 = curriedSum(<span class="number">2</span>)</span><br><span class="line">add2(<span class="number">10</span>)     <span class="comment">// 12</span></span><br></pre></td></tr></table></figure></p>
<h3 id="自动柯里化"><a href="#自动柯里化" class="headerlink" title="自动柯里化"></a>自动柯里化</h3><p>lodash，understore 和 ramda 有 curry 函数可以自动完成柯里化。</p>
<p><a class="jsbin-embed" href="//code.h5jun.com/zure/embed?js,console,output">JS Bin on jsbin.com</a><script src="https:////code.h5jun.com/js/embed.min.js?3.40.2"></script></p>
<h3 id="curry"><a href="#curry" class="headerlink" title="curry"></a>curry</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">curry</span>(<span class="params">fn</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">arg</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> fn(arg)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 接受一个函数</span></span><br><span class="line"><span class="comment">//返回一个只接受一个参数的函数</span></span><br><span class="line"><span class="comment">//似乎是一个没用的函数?</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="number">11</span>);<span class="comment">//=&gt;11</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="number">11</span>,<span class="number">2</span>);<span class="comment">//=&gt;3</span></span><br><span class="line">[<span class="string">'11'</span>,<span class="string">'11'</span>,<span class="string">'11'</span>,<span class="string">'11'</span>].map(<span class="built_in">parseInt</span>);<span class="comment">//=&gt;[11,NaN,3,4]</span></span><br><span class="line">[<span class="string">'11'</span>,<span class="string">'11'</span>,<span class="string">'11'</span>,<span class="string">'11'</span>].map(curry(<span class="built_in">parseInt</span>));<span class="comment">//=&gt;[11,11,11,11]</span></span><br><span class="line"><span class="comment">//显示控制接受固定以及可选的参数的函数行为</span></span><br></pre></td></tr></table></figure>
<h3 id="curryN"><a href="#curryN" class="headerlink" title="curryN"></a>curryN</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">curry2</span>(<span class="params">fn</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">secondArg</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">firstArg</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> fn(firstArg, secondArg)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">curry3</span>(<span class="params">fn</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">last</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">middle</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">first</span>)</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> fn(first, middle, last);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">curryN</span>(<span class="params">fn</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="部分应用-Partial-Application"><a href="#部分应用-Partial-Application" class="headerlink" title="部分应用(Partial Application)"></a>部分应用(Partial Application)</h3><p>部分应用也叫偏函数应用是指使用一个函数并将其应用一个或多个参数，但不是全部参数，在这个过程中创建一个新函数。</p>
<pre><code class="javascript">
    //partical application 
    function apply(fn /* partial arguments... */ ) {
    var args = [].slice.call(arguments, 1);
    return function () {
        var _args = [].slice.call(arguments);
        return fn.apply(this, args.concat(_args));
    }
    }
    //es6
    function apply(fn, ...args) {
    return (..._args) => {
        return fn(...args, ..._args);
    };
    }
</code></pre>


<h2 id="Partial"><a href="#Partial" class="headerlink" title="Partial"></a>Partial</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建偏函数，固定一些参数</span></span><br><span class="line"><span class="keyword">const</span> partical = <span class="function">(<span class="params">f, ...args</span>) =&gt;</span></span><br><span class="line"><span class="comment">// 返回一个带有剩余参数的函数</span></span><br><span class="line">(...moreArgs) =&gt;</span><br><span class="line">    <span class="comment">// 调用原始函数</span></span><br><span class="line">    f(...args, ...moreArgs)</span><br><span class="line"><span class="keyword">const</span> add3 = <span class="function">(<span class="params">a, b, c</span>) =&gt;</span> a + b + c</span><br><span class="line"><span class="comment">// (...args) =&gt; add3(2, 3, ...args)</span></span><br><span class="line"><span class="comment">// (c) =&gt; 2 + 3 + c</span></span><br><span class="line"><span class="keyword">const</span> fivePlus = partical(add3, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">fivePlus(<span class="number">4</span>)  <span class="comment">// 9</span></span><br></pre></td></tr></table></figure>
<h3 id="对比"><a href="#对比" class="headerlink" title="对比"></a>对比</h3><p><img src="https://user-images.githubusercontent.com/16514704/30263004-e181f4c2-9705-11e7-8b56-03b8af5bab2a.png" alt="fp3"></p>
<h3 id="递归"><a href="#递归" class="headerlink" title="递归"></a>递归</h3><ul>
<li>如果一个函数在内部调用自身本身，这个函数就是递归函数</li>
<li>递归函数的优点是定义简单，逻辑清晰。理论上，所有的递归函数都可以写成循环的方式，但循环的逻辑不如递归清晰。</li>
<li>使用递归函数需要注意防止栈溢出。在计算机中，函数调用是通过栈（stack）这种数据结构实现的，每当进入一个函数调用，栈就会加一层栈帧，每当函数返回，栈就会减一层栈帧。由于栈的大小不是无限的，所以，递归调用的次数过多，会导致栈溢出。</li>
</ul>
<h3 id="相互递归"><a href="#相互递归" class="headerlink" title="相互递归"></a>相互递归</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isOdd</span>(<span class="params">v</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (v === <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	<span class="keyword">return</span> isEven( <span class="built_in">Math</span>.abs( v ) - <span class="number">1</span> );</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isEven</span>(<span class="params">v</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (v === <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	<span class="keyword">return</span> isOdd( <span class="built_in">Math</span>.abs( v ) - <span class="number">1</span> );</span><br><span class="line">&#125;</span><br><span class="line">isOdd( <span class="number">33333</span> );	<span class="comment">// RangeError: Maximum call stack size exceeded</span></span><br></pre></td></tr></table></figure>
<h3 id="尾调用-Tail-Calls"><a href="#尾调用-Tail-Calls" class="headerlink" title="尾调用(Tail Calls)"></a>尾调用(Tail Calls)</h3><p>指某个函数的最后一步是调用另一个函数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> g(x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// case1 不属于</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> y = g(x);</span><br><span class="line">  <span class="keyword">return</span> y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// case2 不属于</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> g(x) + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="尾递归"><a href="#尾递归" class="headerlink" title="尾递归"></a>尾递归</h3><hr>
<ul>
<li>尾调用自身，就称为尾递归。</li>
<li>解决递归调用栈溢出的方法是通过尾递归优化(技术上)</li>
<li>在函数返回的时候，调用自身本身，并且，return语句不能包含表达式。这样，编译器或者解释器就可以把尾递归做优化，使递归本身无论调用多少次，都只占用一个栈帧，不会出现栈溢出的情况。</li>
<li>ES6标准规定了 尾调用不会创建额外的调用帧。在严格模式下 尾调用不会造成调用栈溢出。</li>
<li>递归本质上是一种循环操作。纯粹的函数式编程语言没有循环操作命令，所有的循环都用递归实现，这就是为什么尾递归对这些语言极其重要.</li>
</ul>
<h3 id="求自然数阶乘"><a href="#求自然数阶乘" class="headerlink" title="求自然数阶乘"></a>求自然数阶乘</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">factorial</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (n === <span class="number">1</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">return</span> n * factorial(n - <span class="number">1</span>);</span><br><span class="line">&#125;<span class="comment">//复杂度 O(n) </span></span><br><span class="line"></span><br><span class="line">factorial(<span class="number">5</span>) <span class="comment">// 120</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//尾递归</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">factorial</span>(<span class="params">n, total</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (n === <span class="number">1</span>) <span class="keyword">return</span> total;</span><br><span class="line">  <span class="keyword">return</span> factorial(n - <span class="number">1</span>, n * total);</span><br><span class="line">&#125;<span class="comment">//复杂度 O(1) </span></span><br><span class="line"></span><br><span class="line">factorial(<span class="number">5</span>, <span class="number">1</span>) <span class="comment">// 120</span></span><br></pre></td></tr></table></figure>
<h3 id="求斐波那契数值"><a href="#求斐波那契数值" class="headerlink" title="求斐波那契数值"></a>求斐波那契数值</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fibonacci</span> (<span class="params">n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> n &lt;= <span class="number">1</span> ? <span class="number">1</span> : fibonacci(n - <span class="number">1</span>) + fibonacci(n - <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line">fibonacci(<span class="number">40</span>); <span class="comment">// 165580141</span></span><br><span class="line"><span class="comment">//经过尾调优化后</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fibonacci</span> (<span class="params">n, ac1, ac2</span>) </span>&#123;</span><br><span class="line">    (ac1 = ac1 || <span class="number">1</span>), (ac2 = ac2 || <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> n &lt;= <span class="number">1</span> ? ac2 :fibonacci(n - <span class="number">1</span>, ac2, ac1 + ac2);</span><br><span class="line">&#125;</span><br><span class="line">fibonacci(<span class="number">100</span>); <span class="comment">// 573147844013817200000</span></span><br><span class="line">fibonacci(<span class="number">1000</span>); <span class="comment">// 7.0330367711422765e+208</span></span><br><span class="line">fibonacci(<span class="number">10000</span>); <span class="comment">// Infinity</span></span><br></pre></td></tr></table></figure>
<h3 id="递归优化的实现"><a href="#递归优化的实现" class="headerlink" title="递归优化的实现"></a>递归优化的实现</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//转化成while循环</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">factorial</span> (<span class="params">n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> fact = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (n &gt; <span class="number">1</span>) &#123;</span><br><span class="line">        fact *= n--;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> fact;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fibonacci</span> (<span class="params">n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> ac1, ac2, tmp,</span><br><span class="line">        i = ac2 = ac1 = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(n &gt; i++) &#123;</span><br><span class="line">        (tmp = ac2),</span><br><span class="line">        (ac2 = ac1 + ac2),</span><br><span class="line">        (ac1 = tmp);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ac2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="蹦床函数"><a href="#蹦床函数" class="headerlink" title="蹦床函数"></a>蹦床函数</h3><p>顾名思义，蹦床函数就是随着递归执行的开始和结束，调用栈会出现入栈、出栈效果，就像是在弹蹦床。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//utility</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">trampoline</span>(<span class="params">fun <span class="regexp">/*, args */</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> result = fun.apply(fun, _.rest(<span class="built_in">arguments</span>));</span><br><span class="line">  <span class="keyword">while</span> (_.isFunction(result)) &#123;</span><br><span class="line">    result = result();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="trampoline"><a href="#trampoline" class="headerlink" title="trampoline"></a>trampoline</h3><p><a class="jsbin-embed" href="//code.h5jun.com/qoko/embed?js,console,output">JS Bin on jsbin.com</a><script src="https:////code.h5jun.com/js/embed.min.js?3.40.2"></script></p>
<h2 id="一些资料"><a href="#一些资料" class="headerlink" title="一些资料"></a>一些资料</h2><ul>
<li>教程<ul>
<li><a href="https://github.com/getify/Functional-Light-JS" target="_blank" rel="noopener">https://github.com/getify/Functional-Light-JS</a></li>
<li><a href="https://github.com/MostlyAdequate/mostly-adequate-guide" target="_blank" rel="noopener">https://github.com/MostlyAdequate/mostly-adequate-guide</a></li>
<li><a href="https://github.com/hemanth/functional-programming-jargon" target="_blank" rel="noopener">https://github.com/hemanth/functional-programming-jargon</a></li>
</ul>
</li>
<li>框架和库<ul>
<li><a href="http://ramdajs.com/" target="_blank" rel="noopener">http://ramdajs.com/</a></li>
<li><a href="https://facebook.github.io/immutable-js/" target="_blank" rel="noopener">https://facebook.github.io/immutable-js/</a></li>
<li><a href="https://lodash.com/" target="_blank" rel="noopener">https://lodash.com/</a></li>
<li><a href="http://underscorejs.org/" target="_blank" rel="noopener">http://underscorejs.org/</a></li>
<li><a href="http://reactivex.io/rxjs/" target="_blank" rel="noopener">http://reactivex.io/rxjs/</a></li>
<li><a href="http://redux.js.org/" target="_blank" rel="noopener">http://redux.js.org/</a></li>
</ul>
</li>
</ul>

      
    </div>
  
    <footer class="article-footer">
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript-函数式编程/">JavaScript 函数式编程</a></li></ul>

    </footer>
  
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/10/16/vim-headbook/" id="article-nav-newer" class="article-nav-link-wrap">
      <div class="article-nav-title"><span>&lt;</span>&nbsp;
        
          vim headbook
        
      </div>
    </a>
  
  
    <a href="/2017/04/24/h5-video/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">视频H5 video标签最佳实践&nbsp;<span>&gt;</span></div>
    </a>
  
</nav>

  
</article>


<section id="comments">
  <!-- 多说评论框 start -->
  <div class="ds-thread" data-thread-key="post-JavaScript-functional" data-title="JavaScript 函数式编程" data-url="https://gnipbao.github.io/2017/09/27/JavaScript-functional/"></div>
  <!-- 多说评论框 end -->
  <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
  <script type="text/javascript">
    var duoshuoQuery = {short_name:'gnip'};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>
  <!-- 多说公共JS代码 end -->
</section>
</section>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 Gnip&nbsp;
      Powered by <a href="http://hexo.io/" target="_blank">Hexo.</a>

    </div>
  </div>
</footer>
    

<script src="/js/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>
  </div>
</body>
</html>